import{a as n}from"./index-NIGUFBhG.js";import{y as s}from"./index-CjUr_YmU.js";const h=async(a,e,r,c)=>{const t={user_nome:a,user_email:e,user_pass:r};try{const o=await n.post("http://localhost:3000/ecommerce/cadastro",t);o.data.error?s.error(o.data.error):c("/login")}catch(o){throw s.error("Erro na requisição de cadastro: "+o.message),new Error("Erro na requisição de cadastro: "+o.message)}},f=async(a,e,r,c)=>{const t={user_email:a,user_pass:e};try{const o=await n.post("http://localhost:3000/ecommerce/login",t);o.data.error?s.error(o.data.error||"Erro ao logar"):(c(o.data.result),r("/minha-conta"))}catch(o){throw s.error("Erro na requisição de login: "+o.message),new Error("Erro na requisição de login: "+o.message)}},g=async()=>{const a="ecommerce_fotos",e=Math.floor(Date.now()/1e3);try{return{...(await n.post("http://localhost:3000/ecommerce/cloudinary-signature",{timestamp:e,folder:a})).data,folder:a}}catch(r){return console.error("Erro ao obter assinatura do servidor",r),null}},_=async(a,e)=>{const r=await n.post("https://api.cloudinary.com/v1_1/dub80scyn/image/upload",a,{headers:{"Content-Type":"multipart/form-data"}});r.data.secure_url?e.push({foto:r.data.secure_url}):console.error("Erro ao fazer upload da imagem",r.data)},y=async(a,e,r,c,t,o,u,i)=>{const p={produto_nome:a,produto_preco:e,produto_lancamento:r,produto_categoria:c,produto_foto:t,produto_cor:o};try{const d=await n.post("http://localhost:3000/ecommerce/cad-produto",p,{headers:{Authorization:`Bearer ${i}`}});d.data.error?s.error(d.data.error||"Erro ao cadastrar produto"):(u(d.data.result),s.success("Produto cadastrado com sucesso!"))}catch(d){throw s.error("Erro na requisição de cadastro do produto: "+d.message),new Error("Erro na requisição de cadastro do produto: "+d.message)}},E=async(a,e,r)=>{const c={oferta_ativo:!0,oferta_novo_preco:e,produto_id:a};try{const t=await n.post(`http://localhost:3000/ecommerce/offer-produto/${a}`,c,{headers:{Authorization:`Bearer ${r}`}});t.data.error?s.error(t.data.error):s.success("Produto ofertado com sucesso!")}catch(t){throw s.error("Erro na requisição de ofertar o produto: "+t.message),new Error("Erro na requisição de ofertar o produto: "+t.message)}};export{f as a,E as b,y as c,g as d,_ as e,h as p};
